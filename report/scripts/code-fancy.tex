% --- code-fancy.tex (final clean version) ---
\usepackage{xcolor,framed,fvextra}
\usepackage{graphicx}
\usepackage{float}
% Light gray background for code blocks
\definecolor{shadecolor}{RGB}{248,248,248}

% If Pandoc hasn't defined Shaded yet, define it; otherwise, patch it
\makeatletter
\@ifundefined{Shaded}{
  \newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
}{
  \renewenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
}
\makeatother

% Define verbatim block style (used for syntax-highlighted code)
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{
  breaklines,
  breakanywhere,
  commandchars=\\\{\},
  fontsize=\footnotesize,
  frame=single,
  framesep=2mm,
  xleftmargin=1mm
}

% Optional fallback for plain verbatim
\DefineVerbatimEnvironment{Verbatim}{Verbatim}{
  breaklines, breakanywhere, fontsize=\footnotesize
}
